(function() {function j(t){for(t=0;4>t;t++)try{return t?new ActiveXObject([,"Msxml2","Msxml3","Microsoft"][t]+".XMLHTTP"):new XMLHttpRequest}catch(e){}}function ajaxGet(t,e){var n=j();n.onreadystatechange=function(){var t;if(4==n.readyState){try{t=JSON.parse(n.responseText)}catch(r){t={responseText:n.responseText}}200!=n.status&&(t.error={code:n.status,text:n.statusText}),e(t)}},n.open("GET",t,!0),n.setRequestHeader("Accept","json"),n.send()}function ajaxPost(t,e,n){var r=j();r.onreadystatechange=function(){if(4==r.readyState){var t;try{t=JSON.parse(r.responseText)}catch(e){t={Message:r.responseText}}200!=r.status&&(t.error={code:r.status,text:r.statusText}),n(t)}},r.open("POST",t,!0),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(e))}function ApiCaller(t,e,n){this.isApi=!0,this.maxage=e?1e3*e:1e3,this.url=t,this.q=n,this.ckey=this.url}function contentLoaded(t,e){var n=!1,r=!0,o=t.document,s=o.documentElement,i=o.addEventListener?"addEventListener":"attachEvent",a=o.addEventListener?"removeEventListener":"detachEvent",u=o.addEventListener?"":"on",l=function(r){("readystatechange"!=r.type||"complete"==o.readyState)&&(("load"==r.type?t:o)[a](u+r.type,l,!1),!n&&(n=!0)&&e.call(t,r.type||r))},c=function(){try{s.doScroll("left")}catch(t){return void setTimeout(c,50)}l("poll")};if("complete"==o.readyState)e.call(t,"lazy");else{if(o.createEventObject&&s.doScroll){try{r=!t.frameElement}catch(h){}r&&c()}o[i](u+"DOMContentLoaded",l,!1),o[i](u+"readystatechange",l,!1),t[i](u+"load",l,!1)}}function findCmdAttribute(t,e,n,r,o,s){for(o=r=s=!1;t&&t.nodeName&&t.getAttribute;)s||t.hasAttribute("data-tab")&&(s=t),r||(e=t.getAttribute("data-cmd"),e&&(r={cid:e,el:t})),o||(n=t.getAttribute("href"),n&&(o={href:n,el:t})),t=t.parentNode;return{cmd:r,link:o,tab:s}}function foreach(t,e,n){for(var r=0;n=t.length,n>r;r++)e(t[r])}function gEl(t,e,n,r){return t=t.match(/^(\W)?(.*)/),n="getElement"+(t[1]?"#"==t[1]?"ById":"sByClassName":"sByTagName"),r=(e||document)[n](t[2]),r&&r.length?arrafy(r):r}function getByName(t){return arrafy(document.getElementsByName(t))}function arrafy(t,e,n,r){for(n=t.length,e=0,r=[];n>e;)r[e]=t[e],e++;return r}function listenEvent(t,e,n){var r=t.document,o=r.addEventListener?"addEventListener":"attachEvent",s=r.addEventListener?"":"on";r[o](s+e,n,!1)}function stopEvt(t){t.stopped=!0,t.preventDefault?t.preventDefault():t.returnValue=!1}function Vow(t){this.obj=t,this.oaths={},this.oathsTotal=0,this.oathsToFill=0,this.oathsFilled=0}function init(){el.app=gEl("#app")}function initEventHandlers(){listenEvent(window,"click",function(t){var e=t.target||t.srcElement,n=findCmdAttribute(e);if(n&&n.cmd)switch(n.cmd.cid){default:console.log("CMD->",n.cmd)}})}ApiCaller.prototype={post:function(t,e){var n=this,r=(new Date).getTime(),o="?"+r;if(n.q&&t)for(var s in t){if(-1==n.q.indexOf(s))return void alert("Puuttuva parametri "+s);o+="&"+s+"="+t[s],delete t[s]}ajaxPost(n.url+o,t,e)},get:function(t,e){var n=this,r=n.maxage,o=n.ckey,i=s.get(o),a=!1,u=(new Date).getTime(),l="?"+u;if(n.q&&t.q)for(var o in t.q){if(-1==n.q.indexOf(o))return void alert("Puuttuva parametri "+o);l+="&"+o+"="+t.q[o]}i&&i.goodbefore>u&&(e(i.data),a=!0),ajaxGet(n.url+l,function(t){t.error||s.set(o,{data:t,goodbefore:(new Date).getTime()+r}),a||e(t)})}};var s=function(t,e){return e?{get:function(n){return t[n]&&e.parse(t[n])},set:function(n,r){t[n]=e.stringify(r)}}:{}}(this.localStorage||{},JSON);Vow.prototype.promise=function(t,e,n){this.oaths[t]&&this.unPromise(t),this.oaths[t]={property:t,getter:e,opts:n},this.oathsTotal++},Vow.prototype.unPromise=function(t){delete this.oaths[t],this.oathsTotal--},Vow.prototype.get=function(oath){var vow=this;oath.getter.get(oath.opts,function(result){eval("vow.obj"+oath.property+"=result;"),vow.oathsFilled++,vow.onOathFill&&vow.onOathFill(oath,result),vow.oathsFilled==vow.oathsToFill&&vow.callback(vow.obj)})},Vow.prototype.yield=function(t){if(this.callback=t,this.oathsFilled=0,this.oathsToFill=this.oathsTotal,0==this.oathsToFill)return void t(this.obj);for(var e in this.oaths)this.get(this.oaths[e])},function(root){function Context(t,e,n,r){this.stack=t,this.global=e,this.blocks=n,this.templateName=r}function Stack(t,e,n,r){this.tail=e,this.isObject=t&&"object"==typeof t,this.head=t,this.index=n,this.of=r}function Stub(t){this.head=new Chunk(this),this.callback=t,this.out=""}function Stream(){this.head=new Chunk(this)}function Chunk(t,e,n){this.root=t,this.next=e,this.data=[],this.flushable=!1,this.taps=n}function Tap(t,e){this.head=t,this.tail=e}var dust={},NONE="NONE",ERROR="ERROR",WARN="WARN",INFO="INFO",DEBUG="DEBUG",loggingLevels=[DEBUG,INFO,WARN,ERROR,NONE],EMPTY_FUNC=function(){},logger={},originalLog,loggerContext,hasOwnProperty=Object.prototype.hasOwnProperty,getResult;dust.debugLevel=NONE,getResult=function(t,e){return t&&hasOwnProperty.call(t,e)?t[e]:void 0},root&&root.console&&root.console.log&&(loggerContext=root.console,originalLog=root.console.log),logger.log=loggerContext?function(){logger.log="function"==typeof originalLog?function(){originalLog.apply(loggerContext,arguments)}:function(){var t=Array.prototype.slice.apply(arguments).join(" ");originalLog(t)},logger.log.apply(this,arguments)}:function(){},dust.log=function(t,e){e=e||INFO,dust.debugLevel!==NONE&&dust.indexInArray(loggingLevels,e)>=dust.indexInArray(loggingLevels,dust.debugLevel)&&(dust.logQueue||(dust.logQueue=[]),dust.logQueue.push({message:t,type:e}),logger.log("[DUST "+e+"]: "+t))},dust.helpers={},dust.cache={},dust.register=function(t,e){t&&(dust.cache[t]=e)},dust.render=function(t,e,n){var r=new Stub(n).head;try{dust.load(t,r,Context.wrap(e,t)).end()}catch(o){r.setError(o)}},dust.stream=function(t,e){var n=new Stream,r=n.head;return dust.nextTick(function(){try{dust.load(t,n.head,Context.wrap(e,t)).end()}catch(o){r.setError(o)}}),n},dust.renderSource=function(t,e,n){return dust.compileFn(t)(e,n)},dust.compileFn=function(t,e){e=e||null;var n=dust.loadSource(dust.compile(t,e));return function(t,r){var o=r?new Stub(r):new Stream;return dust.nextTick(function(){"function"==typeof n?n(o.head,Context.wrap(t,e)).end():dust.log(new Error("Template ["+e+"] cannot be resolved to a Dust function"),ERROR)}),o}},dust.load=function(t,e,n){var r=dust.cache[t];return r?r(e,n):dust.onLoad?e.map(function(e){dust.onLoad(t,function(r,o){return r?e.setError(r):(dust.cache[t]||dust.loadSource(dust.compile(o,t)),void dust.cache[t](e,n).end())})}):e.setError(new Error("Template Not Found: "+t))},dust.loadSource=function(source,path){return eval(source)},dust.isArray=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},dust.indexInArray=function(t,e,n){if(n=+n||0,Array.prototype.indexOf)return t.indexOf(e,n);if(void 0===t||null===t)throw new TypeError('cannot call method "indexOf" of null');var r=t.length;for(1/0===Math.abs(n)&&(n=0),0>n&&(n+=r,0>n&&(n=0));r>n;n++)if(t[n]===e)return n;return-1},dust.nextTick=function(){return function(t){setTimeout(t,0)}}(),dust.isEmpty=function(t){return dust.isArray(t)&&!t.length?!0:0===t?!1:!t},dust.filter=function(t,e,n){if(n)for(var r=0,o=n.length;o>r;r++){var s=n[r];"s"===s?e=null:"function"==typeof dust.filters[s]?t=dust.filters[s](t):dust.log("Invalid filter ["+s+"]",WARN)}return e&&(t=dust.filters[e](t)),t},dust.filters={h:function(t){return dust.escapeHtml(t)},j:function(t){return dust.escapeJs(t)},u:encodeURI,uc:encodeURIComponent,js:function(t){return JSON?JSON.stringify(t):(dust.log("JSON is undefined.  JSON stringify has not been used on ["+t+"]",WARN),t)},jp:function(t){return JSON?JSON.parse(t):(dust.log("JSON is undefined.  JSON parse has not been used on ["+t+"]",WARN),t)}},dust.makeBase=function(t){return new Context(new Stack,t)},Context.wrap=function(t,e){return t instanceof Context?t:new Context(new Stack(t),{},null,e)},Context.prototype.get=function(t,e){return"string"==typeof t&&("."===t[0]&&(e=!0,t=t.substr(1)),t=t.split(".")),this._get(e,t)},Context.prototype._get=function(t,e){var n,r,o,s,i=this.stack,a=1;if(r=e[0],o=e.length,t&&0===o)s=i,i=i.head;else{if(t)i&&(i=getResult(i.head,r));else{for(;i&&(!i.isObject||(s=i.head,n=getResult(i.head,r),void 0===n));)i=i.tail;i=void 0!==n?n:getResult(this.global,r)}for(;i&&o>a;)s=i,i=getResult(i,e[a]),a++}return"function"==typeof i?function(){try{return i.apply(s,arguments)}catch(t){return dust.log(t,ERROR)}}:(void 0===i&&dust.log("Cannot find the value for reference [{"+e.join(".")+"}] in template ["+this.getTemplateName()+"]"),i)},Context.prototype.getPath=function(t,e){return this._get(t,e)},Context.prototype.push=function(t,e,n){return new Context(new Stack(t,this.stack,e,n),this.global,this.blocks,this.getTemplateName())},Context.prototype.rebase=function(t){return new Context(new Stack(t),this.global,this.blocks,this.getTemplateName())},Context.prototype.current=function(){return this.stack.head},Context.prototype.getBlock=function(t){if("function"==typeof t){var e=new Chunk;t=t(e,this).data.join("")}var n=this.blocks;if(!n)return void dust.log("No blocks for context[{"+t+"}] in template ["+this.getTemplateName()+"]",DEBUG);for(var r,o=n.length;o--;)if(r=n[o][t])return r},Context.prototype.shiftBlocks=function(t){var e,n=this.blocks;return t?(e=n?n.concat([t]):[t],new Context(this.stack,this.global,e,this.getTemplateName())):this},Context.prototype.getTemplateName=function(){return this.templateName},Stub.prototype.flush=function(){for(var t=this.head;t;){if(!t.flushable)return t.error?(this.callback(t.error),dust.log("Chunk error ["+t.error+"] thrown. Ceasing to render this template.",WARN),void(this.flush=EMPTY_FUNC)):void 0;this.out+=t.data.join(""),t=t.next,this.head=t}this.callback(null,this.out)},Stream.prototype.flush=function(){for(var t=this.head;t;){if(!t.flushable)return t.error?(this.emit("error",t.error),dust.log("Chunk error ["+t.error+"] thrown. Ceasing to render this template.",WARN),void(this.flush=EMPTY_FUNC)):void 0;this.emit("data",t.data.join("")),t=t.next,this.head=t}this.emit("end")},Stream.prototype.emit=function(t,e){if(!this.events)return dust.log("No events to emit",INFO),!1;var n=this.events[t];if(!n)return dust.log("Event type ["+t+"] does not exist",WARN),!1;if("function"==typeof n)n(e);else if(dust.isArray(n))for(var r=n.slice(0),o=0,s=r.length;s>o;o++)r[o](e);else dust.log("Event Handler ["+n+"] is not of a type that is handled by emit",WARN)},Stream.prototype.on=function(t,e){return this.events||(this.events={}),this.events[t]?"function"==typeof this.events[t]?this.events[t]=[this.events[t],e]:this.events[t].push(e):(dust.log("Event type ["+t+"] does not exist. Using just the specified callback.",WARN),e?this.events[t]=e:dust.log("Callback for type ["+t+"] does not exist. Listener not registered.",WARN)),this},Stream.prototype.pipe=function(t){return this.on("data",function(e){try{t.write(e,"utf8")}catch(n){dust.log(n,ERROR)}}).on("end",function(){try{return t.end()}catch(e){dust.log(e,ERROR)}}).on("error",function(e){t.error(e)}),this},Chunk.prototype.write=function(t){var e=this.taps;return e&&(t=e.go(t)),this.data.push(t),this},Chunk.prototype.end=function(t){return t&&this.write(t),this.flushable=!0,this.root.flush(),this},Chunk.prototype.map=function(t){var e=new Chunk(this.root,this.next,this.taps),n=new Chunk(this.root,e,this.taps);return this.next=n,this.flushable=!0,t(n),e},Chunk.prototype.tap=function(t){var e=this.taps;return this.taps=e?e.push(t):new Tap(t),this},Chunk.prototype.untap=function(){return this.taps=this.taps.tail,this},Chunk.prototype.render=function(t,e){return t(this,e)},Chunk.prototype.reference=function(t,e,n,r){return"function"==typeof t&&(t=t.apply(e.current(),[this,e,null,{auto:n,filters:r}]),t instanceof Chunk)?t:dust.isEmpty(t)?this:this.write(dust.filter(t,n,r))},Chunk.prototype.section=function(t,e,n,r){if("function"==typeof t&&(t=t.apply(e.current(),[this,e,n,r]),t instanceof Chunk))return t;var o=n.block,s=n["else"];if(r&&(e=e.push(r)),dust.isArray(t)){if(o){var i=t.length,a=this;if(i>0){e.stack.head&&(e.stack.head.$len=i);for(var u=0;i>u;u++)e.stack.head&&(e.stack.head.$idx=u),a=o(a,e.push(t[u],u,i));return e.stack.head&&(e.stack.head.$idx=void 0,e.stack.head.$len=void 0),a}if(s)return s(this,e)}}else if(t===!0){if(o)return o(this,e)}else if(t||0===t){if(o)return o(this,e.push(t))}else if(s)return s(this,e);return dust.log("Not rendering section (#) block in template ["+e.getTemplateName()+"], because above key was not found",DEBUG),this},Chunk.prototype.exists=function(t,e,n){var r=n.block,o=n["else"];if(dust.isEmpty(t)){if(o)return o(this,e)}else if(r)return r(this,e);return dust.log("Not rendering exists (?) block in template ["+e.getTemplateName()+"], because above key was not found",DEBUG),this},Chunk.prototype.notexists=function(t,e,n){var r=n.block,o=n["else"];if(dust.isEmpty(t)){if(r)return r(this,e)}else if(o)return o(this,e);return dust.log("Not rendering not exists (^) block check in template ["+e.getTemplateName()+"], because above key was found",DEBUG),this},Chunk.prototype.block=function(t,e,n){var r=n.block;return t&&(r=t),r?r(this,e):this},Chunk.prototype.partial=function(t,e,n){var r;r=dust.makeBase(e.global),r.blocks=e.blocks,e.stack&&e.stack.tail&&(r.stack=e.stack.tail),n&&(r=r.push(n)),"string"==typeof t&&(r.templateName=t),r=r.push(e.stack.head);var o;return o="function"==typeof t?this.capture(t,r,function(t,e){r.templateName=r.templateName||t,dust.load(t,e,r).end()}):dust.load(t,this,r)},Chunk.prototype.helper=function(t,e,n,r){var o=this;try{return dust.helpers[t]?dust.helpers[t](o,e,n,r):(dust.log("Invalid helper ["+t+"]",WARN),o)}catch(s){return o.setError(s),o}},Chunk.prototype.capture=function(t,e,n){return this.map(function(r){var o=new Stub(function(t,e){t?r.setError(t):n(e,r)});t(o.head,e).end()})},Chunk.prototype.setError=function(t){return this.error=t,this.root.flush(),this},Tap.prototype.push=function(t){return new Tap(t,this)},Tap.prototype.go=function(t){for(var e=this;e;)t=e.head(t),e=e.tail;return t};var HCHARS=new RegExp(/[&<>\"\']/),AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(t){return"string"==typeof t&&HCHARS.test(t)?t.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;"):t};var BS=/\\/g,FS=/\//g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(t){return"string"==typeof t?t.replace(BS,"\\\\").replace(FS,"\\/").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t"):t},"object"==typeof exports?module.exports=dust:root.dust=dust}(function(){return this}()),dust.helpers.tap=function(t,e,n){var r=t;return"function"==typeof t&&(t.isFunction===!0?r=t():(r="",e.tap(function(t){return r+=t,""}).render(t,n).untap(),""===r&&(r=!1))),r},dust.helpers.formatDate=function(t,e,n,r){var o,s,i,a,u=dust.helpers.tap(r.value,t,e);return o=new Date(u),s=o.getMonth()+1,i=o.getDate(),a=o.getFullYear(),t.write(i+"."+s+"."+a)},dust.helpers.dayName=function(t,e,n,r){var o=dust.helpers.tap(r.value,t,e),s=new Date(o),i=s.getDay(),a=["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"];return t.write(a[i])},function(t){!function(){function e(t,e){return e=e.shiftBlocks(o),t.partial("layout.dust",e,null)}function n(t,e){return e=e.shiftBlocks(o),t.write("<table><tr><th>ID</th><th>TIME</th><th>Readning</th><th>Value</th></tr>").section(e.get(["IRTemperatureData"],!1),e,{block:r},null).write("</table>")}function r(t,e){return e=e.shiftBlocks(o),t.write("<tr><td>").reference(e.get(["sensorTagId"],!1),e,"h").write("</td><td>{").reference(e.get(["dateStr"],!1),e,"h").write("</td><td>").reference(e.get(["cname"],!1),e,"h").write("</td><td>").reference(e.getPath(!1,["value","objectTemp"]),e,"h").write("</td></tr>")}t.register("index.dust",e);var o={bodyContent:n};return e}(),function(){function e(t,e){return t.notexists(e.get(["pushstate"],!1),e,{block:n},null).block(e.getBlock("pageHeader"),e,{},null).block(e.getBlock("bodyContent"),e,{},null).notexists(e.get(["pushstate"],!1),e,{block:r},null)}function n(t,e){return t.write('<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"xmlns:fb="http://ogp.me/ns/fb#"><head><title>').reference(e.get(["siteTitle"],!1),e,"h").write('</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta property="og:title" content="').reference(e.get(["siteTitle"],!1),e,"h").write('" /><meta name="viewport" content="width=320 initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /><link type="text/css" rel="stylesheet" media="all" href="/css/app.min.css" /></head><body><div id="app">')}function r(t){return t.write('</div><script type="text/javascript" src="/js/app.min.js"></script></body></html>')}return t.register("layout.dust",e),e}()}("undefined"!=typeof exports?module.exports=require("dustjs-linkedin"):dust);var el={};contentLoaded(window,init);})();